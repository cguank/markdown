```js
const STEP = 200

function getNewList(list, startIndex) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      let endIndex = startIndex + STEP
      endIndex = endIndex < list.length ? endIndex : list.length
      const startTime = Date.now()
      const newList = list.slice(0, startIndex)
      for (let i = startIndex; i < endIndex; i += 1) {
        // do something;
        let j = 0
        while (j++ < 1000000) {}
        newList.push({...list[i]})
      }

      const finish = Date.now() - startTime
      console.log('get new list done', finish)

      resolve({
        time: finish,
        nextStartIndex: endIndex,
        data: newList,
      })
    }, 0)
  })
}
const list = Array(3000)
  .fill(0)
  .map((i, index) => ({ name: `a${index}`, index: index }));

async function paginate(list, startIndex) {
  if (list.length <= startIndex) return
  console.log('.......before getNewList start', startIndex)
  const data = await getNewList(list, startIndex)
  // do something about data.newlist;
  console.log('....getNewList time', data.time, data.nextStartIndex)
  paginate(list, data.nextStartIndex)
}

async function main() {
  let i = 0
  while (i++ < 10) {
    console.log(i)
    if (i === 1) {
      paginate(list, 0)
    }
  }
}
main()
Promise.resolve().then(() => {
  console.log('in promose')
})
setTimeout(() => {
  console.log('settimeout 0')
}, 0)
```
[async/await 原理](https://juejin.cn/post/7007031572238958629)